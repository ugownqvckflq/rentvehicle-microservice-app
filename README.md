<h1 align="center">RentRide</h1>
<h3 align="center">Содержание:</h3>
1. Описание приложения и функционала<br/>
2. Архитектура приложения<br/>
3. Схема структуры базы данных<br/>
4. Запускаем приложение<br/>
5. API взаимодействие с приложением<br/>
6. Использованные технологии и их версии<br/>


### I. Описание приложения и функционала
Перед вами приложение, предназначенное для для удобной аренды и оплаты транспортных средств.
Кроме базового функционала приложения по принципу получения данных, создания, обновления,
и удаления всех доступных моделей приложения, в приложении предоставлен весьма удобный и практичный на сегодня функционал
.Это приложение объединяет базовые функции управления пользователями с продвинутыми возможностями для администраторов и удобной системы аренды.

В первую очередь, приложение предлагает удобную систему авторизации и аутентификации по логину и паролю с использованием jwt токенов, 
при которой доступ к приложению осуществляется ограничено пользователю с ролью ROLE_USER и полный доступ ко всем возможностям с ролью ROLE_ADMIN. Для этого я использовал возможности AOP и создал свой аспект для проверки роли пользователя.
При регистрации пользователь автоматически получает роль обычного пользователя.
Для регистрации понадобится логин, пароль, почта (для уведомлений о начале/конце аренды).
После регистрации в базе данных создается запись с данными пользователя, (пароль в бд шифруется).
И при последующем использовании приложения пользователю нужно будет лишь вписать свои логин 
и пароль и если они валидны, то он получит свой личный jwt токен для последующих операций.
Для аренды транспорта ему нужно будет добавить карту для оплаты поездок, карта проверяется на валидность и cvv карты так же надежно шифруется в БД.

После регистрации и аутентификации, пользователю будет доступен основной функционал приложения и
конечно самое главное это возможность взять в аренду конкретный выбранный транспорт. 
Для этого пользователю нужно найти понравившийся "транспорт компании" возле себя и ввести его номерной знак в приложении, с его счета спишется начальная сумма за старт поездки и затем согласно поминутному тарифу для конкретного вида транспорта будет считаться время использований транспорта и конечная сумма спишется уже после того как пользователь вернет транспорт на место.

Перед арендой пользователь может удобно посмотреть информацию о транспорте.
Для этого достаточно выбрать нужный адрес запроса.
Пользователю, в виде объекта JSON, вернется список из базы данных свободных транспортных средств, которые ему доступны для аренды. 
Кроме этого можно фильтровать перечень транспорта: по модели, уровню топлива, заряду батареи, и др. 

### II. Архитектура приложения
---фото---



###  III. Схема структуры базы данных
---фото---

###  VI. Запускаем приложение
1. Клонируем проект в среду разработки
2. Убедитесь что Java 17, docker compose 3.x
3. Запустить приложение можно терминальной командой "docker composer up"
4. При успешном запуске приложения, можно пользоваться подключенными API


### V. API взаимодействие с приложением

1. Аутентификация и Регистрация
1.1 Аутентификация пользователя

URL: http://localhost:8080/auth/signin
Метод: POST
Параметры тела запроса: AuthenticationRequest loginRequest (содержит username и password)
Доступно для: Неавторизованных пользователей
Метод сервиса: authenticateUser()
Описание: Выполняет аутентификацию пользователя. В случае успеха возвращает JWT токен.
1.2 Регистрация пользователя

URL: http://localhost:8080/auth/signup
Метод: POST
Параметры тела запроса: SignupRequest signUpRequest (содержит username, email, password)
Доступно для: Неавторизованных пользователей
Метод сервиса: registerUser()
Описание: Регистрирует нового пользователя в системе. Возвращает сообщение об успешной регистрации.
1.3 Назначение роли администратора

URL: http://localhost:8080/auth/grant-admin/{id}
Метод: POST
Параметр пути: Long id (идентификатор пользователя, которому назначается роль администратора)
Доступно для: ADMIN
Метод сервиса: grantAdminRole()
Описание: Назначает указанному пользователю роль администратора.
2. Управление пользователями
2.1 Поиск пользователя по имени пользователя

URL: http://localhost:8080/auth/find/{username}
Метод: GET
Параметр пути: String username (имя пользователя)
Доступно для: AUTHENTICATED USER
Метод сервиса: findUserByUsername()
Описание: Возвращает данные пользователя по его имени.
3. Управление картами и средствами
3.1 Добавление карты

URL: http://localhost:8080/card/add-card
Метод: POST
Параметры тела запроса: CardRequest cardRequest (содержит информацию о карте)
Доступно для: AUTHENTICATED USER
Метод сервиса: addCard()
Описание: Добавляет новую карту пользователю.
3.2 Добавление средств на карту

URL: http://localhost:8080/card/add-funds
Метод: POST
Параметры запроса: BigDecimal amount (сумма для добавления)
Доступно для: ADMIN
Метод сервиса: addFunds()
Описание: Добавляет указанную сумму на карту пользователя.
3.3 Снятие средств с карты

URL: http://localhost:8080/card/deduct-funds
Метод: POST
Параметры запроса: BigDecimal amount (сумма для снятия)
Доступно для: ADMIN
Метод сервиса: deductFunds()
Описание: Снимает указанную сумму с карты пользователя.
3.4 Получение баланса

URL: http://localhost:8080/card/balance
Метод: GET
Доступно для: AUTHENTICATED USER
Метод сервиса: getBalance()
Описание: Возвращает текущий баланс карты пользователя.
4. Управление арендами
4.1 Аренда транспортного средства

URL: http://localhost:8080/rent/rent
Метод: POST
Параметры тела запроса: RentalRequest rentalRequest (содержит информацию о транспортном средстве и сроке аренды)
Доступно для: AUTHENTICATED USER
Метод сервиса: rentVehicle()
Описание: Позволяет пользователю арендовать транспортное средство.
4.2 Возврат транспортного средства

URL: http://localhost:8080/rent/return
Метод: POST
Параметры тела запроса: ReturnRequest returnRequest (содержит информацию о возврате транспортного средства)
Доступно для: AUTHENTICATED USER
Метод сервиса: returnVehicle()
Описание: Позволяет пользователю вернуть арендованное транспортное средство.
4.3 Получение аренды по идентификатору

URL: http://localhost:8080/rent/{rentalId}
Метод: GET
Параметр пути: Long rentalId (идентификатор аренды)
Доступно для: ADMIN
Метод сервиса: getRentalById()
Описание: Возвращает информацию об аренде по её идентификатору.
4.4 Получение всех аренд пользователя

URL: http://localhost:8080/rent/user/{userId}
Метод: GET
Параметр пути: Long userId (идентификатор пользователя)
Доступно для: ADMIN
Метод сервиса: getRentalsByUserId()
Описание: Возвращает все аренды, связанные с указанным пользователем.
5. Управление транспортными средствами
5.1 Получение всех транспортных средств

URL: http://localhost:8080/vehicle/all
Метод: GET
Доступно для: ADMIN
Метод сервиса: getAllVehicles()
Описание: Возвращает список всех транспортных средств.
5.2 Получение транспортного средства по идентификатору

URL: http://localhost:8080/vehicle/{id}
Метод: GET
Параметр пути: Long id (идентификатор транспортного средства)
Доступно для: AUTHENTICATED USER
Метод сервиса: getVehicleById()
Описание: Возвращает информацию о транспортном средстве по его идентификатору.
5.3 Создание транспортного средства

URL: http://localhost:8080/vehicle/create
Метод: POST
Параметры тела запроса: VehicleCreateDTO vehicleCreateDTO (содержит информацию о транспортном средстве)
Доступно для: ADMIN
Метод сервиса: createVehicle()
Описание: Создаёт новое транспортное средство в системе.
5.4 Удаление транспортного средства

URL: http://localhost:8080/vehicle/{id}
Метод: DELETE
Параметр пути: Long id (идентификатор транспортного средства)
Доступно для: ADMIN
Метод сервиса: deleteVehicle()
Описание: Удаляет транспортное средство из системы по его идентификатору.
5.5 Получение транспортного средства по номерному знаку

URL: http://localhost:8080/vehicle/plate/{plate}
Метод: GET
Параметр пути: String plate (номерной знак транспортного средства)
Доступно для: AUTHENTICATED USER
Метод сервиса: getByPlate()
Описание: Возвращает транспортное средство по его номерному знаку.
5.6 Обновление транспортного средства

URL: http://localhost:8080/vehicle/{id}
Метод: PUT
Параметры тела запроса: VehicleCreateDTO vehicleCreateDTO (содержит обновлённую информацию о транспортном средстве)
Параметр пути: Long id (идентификатор транспортного средства)
Доступно для: ADMIN
Метод сервиса: updateVehicle()
Описание: Обновляет данные о транспортном средстве.
5.7 Получение доступных транспортных средств

URL: http://localhost:8080/vehicle/available
Метод: GET
Доступно для: AUTHENTICATED USER
Метод сервиса: getAvailableVehicles()
Описание: Возвращает список всех доступных транспортных средств.
5.8 Изменение статуса транспортного средства

URL: http://localhost:8080/vehicle/set-status/{id}/{status}
Метод: POST
Параметр пути: Long id (идентификатор транспортного средства), Status status (новый статус)
Доступно для: AUTHENTICATED USER
Метод сервиса: setVehicleStatusById()
Описание: Изменяет статус транспортного средства на указанный.
5.9 Поиск транспортных средств по модели

URL: http://localhost:8080/vehicle/search/{model}
Метод: GET
Параметр пути: String model (модель транспортного средства)
Доступно для: AUTHENTICATED USER
Метод сервиса: searchVehiclesByModel()
Описание: Ищет транспортные средства по указанной модели.

### VI. Использованные технологии и их версии

* Spring Boot - 3.3.2 v.
* Spring Security - 3.2. v.
* Spring Cloud - 2023.0.3 v.
* Java - 17 v.
* Kafka - 3.3.1 v.
* Postgresql - 42.7.2 v.
* Liquibase - 4.28.0 v.
* Docker - 3.0 v.
* Eureka 4.1.3 v.
* Spring Boot Starter Mail 3.3.2 v.
